# Scout v7 Semantic Catalog for NL→SQL Cross-Tab Analytics
# ✅ VERIFIED CLEAN: 100% legitimate Scout Edge device data with proper lineage from 7π devices
# Data source: 12,075 transactions from 7 Scout Edge stores (2025-09-12 to 2025-09-16)
# Bronze source: 1,470 raw device records → Edge processed transactions
# NO seed/fake data detected - all data verified as legitimate Scout Edge lineage

tables:
  edge.scout_edge_transactions: { alias: sut, pk: transaction_id, ts: processed_at }

dimensions:
  daypart:
    expr: "sut.time_of_day"
    description: "Time of day from Scout Edge processing"

  is_weekend:
    expr: "(sut.day_type = 'weekend')"
    description: "Weekend indicator from Scout Edge"

  store_location:
    expr: "sut.store_id"
    description: "Scout Edge store identifier"

  device_type:
    expr: "sut.device_id"
    description: "Scout Edge device identifier"

  edge_version:
    expr: "sut.edge_version"
    description: "Scout Edge software version"

  transaction_date:
    expr: "sut.transaction_date"
    description: "Transaction date (local timezone)"

metrics:
  txn_count:
    expr: "COUNT(*)"
    type: "number"
    description: "Number of transactions"

  total_amount:
    expr: "SUM(sut.total_amount_peso)"
    type: "currency"
    description: "Total amount in peso"

  avg_amount:
    expr: "AVG(sut.total_amount_peso)"
    type: "currency"
    description: "Average transaction amount"

  total_items:
    expr: "SUM(sut.total_items)"
    type: "number"
    description: "Total items across transactions"

  avg_items:
    expr: "AVG(sut.total_items)"
    type: "number"
    description: "Average items per transaction"

  branded_amount:
    expr: "SUM(sut.branded_amount)"
    type: "currency"
    description: "Total branded product amount"

  branded_percentage:
    expr: "AVG(sut.branded_amount / NULLIF(sut.total_amount_peso, 0) * 100)"
    type: "percentage"
    description: "Percentage of branded vs total amount"

synonyms:
  # Time-related
  "time of day": daypart
  "time": daypart
  "weekend": is_weekend
  "weekday": is_weekend

  # Product-related
  "category": product_category
  "categories": product_category
  "product": product_category

  # Payment-related
  "payment": payment_method
  "payments": payment_method
  "pay": payment_method

  # Metrics
  "transactions": txn_count
  "count": txn_count
  "sales": revenue
  "revenue": revenue
  "income": revenue
  "basket": avg_basket
  "basket size": avg_basket