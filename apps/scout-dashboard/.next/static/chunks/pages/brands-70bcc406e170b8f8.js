(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[803],{9685:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/brands",function(){return r(3609)}])},7609:function(e,a,r){"use strict";var t=r(5893);r(7294),a.Z=e=>{let{children:a}=e;return(0,t.jsx)("div",{className:"scout-auth-context",children:a})}},3609:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return brands}});var t=r(5893),s=r(7294),i=r(7729),n=r.n(i),l=r(9097),d=r.n(l),o=r(5300),c=r(8205),h=r(739),x=r(5484),m=r(5556),u=r(3131),v=r(1154),g=r(171),p=r(8560),j=r(1510),b=r(9899),y=r(5076),_=r(9669),f=r(86),w=r(3891),N=r(5226),k=r(7049),C=r(1544),M=r(8635);let BrandAnalytics=()=>{var e,a,r,i,n,l,d,B,S,P,D,A,K,F,R,E;let[G,q]=(0,s.useState)({categories:void 0}),[T,H]=(0,s.useState)(null),[I,L]=(0,s.useState)("performance"),{data:U,isLoading:O,error:Z}=(0,o.a)({queryKey:["scout-brand-analytics",G],queryFn:async()=>{var e;let a=new URLSearchParams({type:"brands"});(null===(e=G.categories)||void 0===e?void 0:e.length)&&a.append("categories",G.categories.join(","));let r=await fetch("/api/scout/analytics?".concat(a));if(!r.ok)throw Error("Failed to fetch brand analytics");return r.json()},refetchInterval:6e5,staleTime:48e4}),z=s.useMemo(()=>{if(!(null==U?void 0:U.data))return null;let e=U.data,a=e.reduce((e,a)=>{let r=a.brand_tier||"Unknown";return e[r]||(e[r]={tier:r,count:0,total_crp:0,avg_market_share:0}),e[r].count++,e[r].total_crp+=a.consumer_reach_points||0,e[r].avg_market_share+=a.market_share_percent||0,e},{}),r=Object.values(a).map(e=>({...e,avg_market_share:e.avg_market_share/e.count})),t=e.map(e=>({brand_name:e.brand_name,market_share:e.market_share_percent||0,price_index:100*(e.vs_category_avg||1),consumer_reach_points:e.consumer_reach_points||0,brand_tier:e.brand_tier,growth_status:e.growth_status})),s=e.filter(e=>e.market_share_percent&&e.market_share_percent>1).map(e=>({brand_name:e.brand_name,market_share:e.market_share_percent||0,consumer_reach_points:e.consumer_reach_points||0,avg_price:e.avg_price_php||0,price_positioning:e.value_proposition,growth_rate:e.brand_growth_yoy||0,competitive_status:e.position_type||"unknown"})),i=T?(()=>{let a=e.find(e=>e.brand_name===T);return a?[{metric:"Market Share",value:Math.min(4*(a.market_share_percent||0),100),fullMark:100},{metric:"CRP",value:Math.min((a.consumer_reach_points||0)/10,100),fullMark:100},{metric:"Price Competitiveness",value:Math.max(0,100-Math.abs(((a.vs_category_avg||1)-1)*100)),fullMark:100},{metric:"Growth",value:Math.min(Math.max(10*(a.brand_growth_yoy||0)+50,0),100),fullMark:100},{metric:"Channel Presence",value:Math.min(12.5*(a.channels_available||0),100),fullMark:100}]:[]})():[];return{tiers:r,positioning:t,competitive:s,radar:i,brands:e}},[U,T]);if(O)return(0,t.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-scout-primary"})});if(Z)return(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-red-800 font-medium",children:"Error Loading Brand Analytics"}),(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:Z instanceof Error?Z.message:"Unknown error occurred"})]});let V=(null==z?void 0:null===(a=z.brands)||void 0===a?void 0:null===(e=a.sort((e,a)=>(a.consumer_reach_points||0)-(e.consumer_reach_points||0)))||void 0===e?void 0:e.slice(0,5))||[],$=(null==z?void 0:null===(n=z.brands)||void 0===n?void 0:null===(i=n.filter(e=>void 0!==e.brand_growth_yoy))||void 0===i?void 0:null===(r=i.sort((e,a)=>(a.brand_growth_yoy||0)-(e.brand_growth_yoy||0)))||void 0===r?void 0:r.slice(0,5))||[];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Brand Analytics"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Market positioning, competitive intelligence, and brand performance insights"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:(0,t.jsxs)("select",{value:(null===(l=G.categories)||void 0===l?void 0:l[0])||"",onChange:e=>q({...G,categories:e.target.value?[e.target.value]:void 0}),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,t.jsx)("option",{value:"",children:"All Categories"}),(0,t.jsx)("option",{value:"Beverages",children:"Beverages"}),(0,t.jsx)("option",{value:"Snacks",children:"Snacks"}),(0,t.jsx)("option",{value:"Personal Care",children:"Personal Care"}),(0,t.jsx)("option",{value:"Household",children:"Household"})]})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(MetricCard,{title:"Total Brands",value:(null==z?void 0:null===(B=z.brands)||void 0===B?void 0:null===(d=B.length)||void 0===d?void 0:d.toString())||"0",subtitle:"Active brands tracked",icon:(0,t.jsx)(N.Z,{className:"w-5 h-5"}),color:"bg-blue-50 text-blue-600"}),(0,t.jsx)(MetricCard,{title:"Market Leaders",value:(null==z?void 0:null===(D=z.brands)||void 0===D?void 0:null===(P=D.filter(e=>"leader"===e.position_type))||void 0===P?void 0:null===(S=P.length)||void 0===S?void 0:S.toString())||"0",subtitle:"Leading market position",icon:(0,t.jsx)(k.Z,{className:"w-5 h-5"}),color:"bg-green-50 text-green-600"}),(0,t.jsx)(MetricCard,{title:"Avg. Market Share",value:"".concat(Math.round(((null==z?void 0:null===(A=z.brands)||void 0===A?void 0:A.reduce((e,a)=>e+(a.market_share_percent||0),0))||0)/Math.max((null==z?void 0:null===(K=z.brands)||void 0===K?void 0:K.length)||1,1)),"%"),subtitle:"Average across all brands",icon:(0,t.jsx)(C.Z,{className:"w-5 h-5"}),color:"bg-yellow-50 text-yellow-600"}),(0,t.jsx)(MetricCard,{title:"High Growth",value:(null==z?void 0:null===(E=z.brands)||void 0===E?void 0:null===(R=E.filter(e=>"High Growth"===e.growth_status))||void 0===R?void 0:null===(F=R.length)||void 0===F?void 0:F.toString())||"0",subtitle:"Fast-growing brands",icon:(0,t.jsx)(M.Z,{className:"w-5 h-5"}),color:"bg-purple-50 text-purple-600"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,t.jsx)("div",{className:"flex space-x-4",children:[{key:"performance",label:"Performance Overview"},{key:"competitive",label:"Competitive Analysis"},{key:"pricing",label:"Pricing Intelligence"}].map(e=>(0,t.jsx)("button",{onClick:()=>L(e.key),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(I===e.key?"bg-scout-primary text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:e.label},e.key))})}),z&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:["performance"===I&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ChartCard,{title:"Brand Tier Distribution",subtitle:"Brands by performance tier",children:(0,t.jsx)(c.h,{width:"100%",height:300,children:(0,t.jsxs)(h.v,{data:z.tiers,children:[(0,t.jsx)(x.q,{strokeDasharray:"3 3"}),(0,t.jsx)(m.K,{dataKey:"tier",angle:-45,textAnchor:"end",height:100,interval:0,fontSize:12}),(0,t.jsx)(u.B,{}),(0,t.jsx)(v.u,{}),(0,t.jsx)(g.$,{dataKey:"count",fill:"#0066CC",name:"Brand Count"})]})})}),(0,t.jsx)(ChartCard,{title:"Top Brand Performance",subtitle:"By Consumer Reach Points (CRP)",children:(0,t.jsx)(c.h,{width:"100%",height:300,children:(0,t.jsxs)(h.v,{data:V,children:[(0,t.jsx)(x.q,{strokeDasharray:"3 3"}),(0,t.jsx)(m.K,{dataKey:"brand_name",angle:-45,textAnchor:"end",height:100,interval:0,fontSize:12}),(0,t.jsx)(u.B,{}),(0,t.jsx)(v.u,{}),(0,t.jsx)(g.$,{dataKey:"consumer_reach_points",fill:"#4ECDC4",name:"CRP"})]})})})]}),"competitive"===I&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ChartCard,{title:"Market Positioning Matrix",subtitle:"Price vs Market Share",children:(0,t.jsx)(c.h,{width:"100%",height:300,children:(0,t.jsxs)(p.G,{data:z.positioning,children:[(0,t.jsx)(x.q,{strokeDasharray:"3 3"}),(0,t.jsx)(m.K,{dataKey:"market_share",name:"Market Share (%)",domain:["dataMin","dataMax"]}),(0,t.jsx)(u.B,{dataKey:"price_index",name:"Price Index (%)",domain:["dataMin","dataMax"]}),(0,t.jsx)(v.u,{formatter:(e,a)=>["".concat(Number(e).toFixed(1)).concat("%"),a],labelFormatter:e=>"Brand: ".concat(e)}),(0,t.jsx)(j.b,{dataKey:"price_index",fill:"#FF6B35",name:"Brands"})]})})}),(0,t.jsx)(ChartCard,{title:"Fastest Growing Brands",subtitle:"Year-over-year growth rate",children:(0,t.jsx)(c.h,{width:"100%",height:300,children:(0,t.jsxs)(h.v,{data:$,children:[(0,t.jsx)(x.q,{strokeDasharray:"3 3"}),(0,t.jsx)(m.K,{dataKey:"brand_name",angle:-45,textAnchor:"end",height:100,interval:0,fontSize:12}),(0,t.jsx)(u.B,{}),(0,t.jsx)(v.u,{formatter:e=>["".concat(Number(e).toFixed(1),"%"),"Growth Rate"]}),(0,t.jsx)(g.$,{dataKey:"brand_growth_yoy",fill:"#96CEB4",name:"YoY Growth %"})]})})})]}),"pricing"===I&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ChartCard,{title:"Price vs Market Share",subtitle:"Pricing strategy analysis",children:(0,t.jsx)(c.h,{width:"100%",height:300,children:(0,t.jsxs)(p.G,{data:z.competitive,children:[(0,t.jsx)(x.q,{strokeDasharray:"3 3"}),(0,t.jsx)(m.K,{dataKey:"market_share",name:"Market Share (%)"}),(0,t.jsx)(u.B,{dataKey:"avg_price",name:"Avg Price (₱)"}),(0,t.jsx)(v.u,{formatter:(e,a)=>["Avg Price (₱)"===a?"₱".concat(Number(e).toFixed(2)):"".concat(Number(e).toFixed(1),"%"),a]}),(0,t.jsx)(j.b,{dataKey:"avg_price",fill:"#45B7D1"})]})})}),(0,t.jsx)(ChartCard,{title:"Value Proposition Distribution",subtitle:"Brands by pricing strategy",children:(0,t.jsx)(c.h,{width:"100%",height:300,children:(0,t.jsxs)(h.v,{data:[{proposition:"Premium",count:z.brands.filter(e=>"Premium"===e.value_proposition).length},{proposition:"Mainstream",count:z.brands.filter(e=>"Mainstream"===e.value_proposition).length},{proposition:"Value",count:z.brands.filter(e=>"Value"===e.value_proposition).length}],children:[(0,t.jsx)(x.q,{strokeDasharray:"3 3"}),(0,t.jsx)(m.K,{dataKey:"proposition"}),(0,t.jsx)(u.B,{}),(0,t.jsx)(v.u,{}),(0,t.jsx)(g.$,{dataKey:"count",fill:"#FFEAA7",name:"Brand Count"})]})})})]})]}),z&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Brand Deep Dive"}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("select",{value:T||"",onChange:e=>H(e.target.value||null),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a brand for detailed analysis"}),z.brands.map(e=>(0,t.jsx)("option",{value:e.brand_name,children:e.brand_name},e.brand_name))]})}),T&&z.radar.length>0&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Brand Health Score"}),(0,t.jsx)(c.h,{width:"100%",height:300,children:(0,t.jsxs)(b.H,{data:z.radar,children:[(0,t.jsx)(y.n,{}),(0,t.jsx)(_.I,{dataKey:"metric",fontSize:12}),(0,t.jsx)(f.S,{angle:90,domain:[0,100],fontSize:10}),(0,t.jsx)(w.F,{name:T,dataKey:"value",stroke:"#0066CC",fill:"#0066CC",fillOpacity:.2,strokeWidth:2}),(0,t.jsx)(v.u,{})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Brand Details"}),(()=>{var e,a,r,s;let i=z.brands.find(e=>e.brand_name===T);return i?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(DetailRow,{label:"Market Share",value:"".concat((null===(e=i.market_share_percent)||void 0===e?void 0:e.toFixed(1))||0,"%")}),(0,t.jsx)(DetailRow,{label:"Consumer Reach Points",value:(null===(a=i.consumer_reach_points)||void 0===a?void 0:a.toLocaleString())||"0"}),(0,t.jsx)(DetailRow,{label:"Average Price",value:"₱".concat((null===(r=i.avg_price_php)||void 0===r?void 0:r.toFixed(2))||"0")}),(0,t.jsx)(DetailRow,{label:"Brand Tier",value:i.brand_tier||"Unknown"}),(0,t.jsx)(DetailRow,{label:"Value Proposition",value:i.value_proposition||"Unknown"}),(0,t.jsx)(DetailRow,{label:"Growth Status",value:i.growth_status||"Unknown"}),(0,t.jsx)(DetailRow,{label:"Competitive Status",value:i.position_type||"Unknown"}),(0,t.jsx)(DetailRow,{label:"Channels Available",value:(null===(s=i.channels_available)||void 0===s?void 0:s.toString())||"0"})]}):null})()]})]})]})]})},MetricCard=e=>{let{title:a,value:r,subtitle:s,icon:i,color:n}=e;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:a}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:s})]}),(0,t.jsx)("div",{className:"p-3 rounded-lg ".concat(n),children:i})]})})},ChartCard=e=>{let{title:a,subtitle:r,children:s}=e;return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a}),r&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r})]}),s]})},DetailRow=e=>{let{label:a,value:r}=e;return(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:a}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:r})]})};var B=r(7609),brands=()=>(0,t.jsxs)(B.Z,{requiredPermissions:["scout_read","analytics_advanced"],children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Brand Analytics - Scout v7 Dashboard"}),(0,t.jsx)("meta",{name:"description",content:"Brand performance and competitive intelligence analytics"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(d(),{href:"/",children:(0,t.jsx)("h1",{className:"text-xl font-bold text-scout-primary cursor-pointer",children:"Scout v7"})})}),(0,t.jsxs)("nav",{className:"hidden md:ml-8 md:flex md:space-x-8",children:[(0,t.jsx)(d(),{href:"/",className:"text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium",children:"Overview"}),(0,t.jsx)(d(),{href:"/brands",className:"text-gray-900 hover:text-scout-primary px-3 py-2 rounded-md text-sm font-medium",children:"Brand Analytics"}),(0,t.jsx)(d(),{href:"/stores",className:"text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium",children:"Store Performance"}),(0,t.jsx)(d(),{href:"/insights",className:"text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium",children:"AI Insights"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("en-PH",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"Live"})]})]})]})})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsx)(BrandAnalytics,{})}),(0,t.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-16",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"\xa9 2025 TBWA Data Intelligence Team"}),(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"|"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Scout v7 Analytics Platform"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-6 mt-4 md:mt-0",children:[(0,t.jsx)("a",{href:"/api/scout/analytics",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-500 hover:text-gray-700",children:"API Documentation"}),(0,t.jsx)("a",{href:"https://github.com/tbwa/scout-v7",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-500 hover:text-gray-700",children:"GitHub"}),(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"v1.0.0"})]})]})})})]})]})}},function(e){e.O(0,[765,300,774,888,179],function(){return e(e.s=9685)}),_N_E=e.O()}]);