(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{170:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(5155),r=t(2115),l=t(2619),i=t.n(l),n=t(63),c=t(1169),d=t(1524),o=t(6617),x=t(814),m=t(534),h=t(1873),g=t(5937),u=t(9867),j=t(5229),p=t(9540);let v=()=>{let[e,s]=(0,r.useState)(!1),t=(0,n.usePathname)(),l=[{name:"Consumer Behavior",href:"/consumer-behavior",icon:c.A,description:"Purchase decisions & signals",active:"/consumer-behavior"===t},{name:"Transaction Trends",href:"/transaction-trends",icon:d.A,description:"Volume, timing & patterns",active:"/transaction-trends"===t},{name:"Product Mix & SKU",href:"/product-mix",icon:o.A,description:"Categories, brands & combos",active:"/product-mix"===t},{name:"Consumer Profiling",href:"/consumer-profiling",icon:x.A,description:"Demographics & location",active:"/consumer-profiling"===t},{name:"Competitive Analysis",href:"/competitive-analysis",icon:m.A,description:"Brand vs brand comparisons",active:"/competitive-analysis"===t},{name:"Geographical Intelligence",href:"/geographical-intelligence",icon:h.A,description:"Location & regional insights",active:"/geographical-intelligence"===t}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0",children:(0,a.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200 pt-5 pb-4 overflow-y-auto",children:[(0,a.jsx)("div",{className:"flex items-center flex-shrink-0 px-6 mb-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Suqi Analytics"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Retail Intelligence"})]})]})}),(0,a.jsx)("nav",{className:"flex-1 px-3 space-y-2",children:l.map(e=>{let s=e.icon;return(0,a.jsxs)(i(),{href:e.href,className:"\n                    group flex items-start p-3 text-sm font-medium rounded-lg transition-colors\n                    ".concat(e.active?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","\n                  "),children:[(0,a.jsx)(s,{className:"\n                      flex-shrink-0 w-5 h-5 mr-3 mt-0.5\n                      ".concat(e.active?"text-blue-600":"text-gray-400 group-hover:text-gray-500","\n                    ")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]})]},e.name)})}),(0,a.jsxs)("div",{className:"flex-shrink-0 px-3 pb-4 space-y-2",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Ask Suqi"]}),(0,a.jsxs)("button",{className:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Export"]})]}),(0,a.jsx)("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsx)("div",{className:"font-medium text-gray-700 mb-1",children:"Data Source"}),(0,a.jsx)("div",{children:"Scout v7 Transactions"}),(0,a.jsx)("div",{children:"NCR Metro Manila"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,a.jsx)("span",{children:"Live Data"})]})]})})]})}),(0,a.jsxs)("div",{className:"lg:hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 bg-white border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Suqi Analytics"})})]}),(0,a.jsx)("button",{onClick:()=>s(!e),className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:e?(0,a.jsx)(j.A,{className:"w-6 h-6"}):(0,a.jsx)(p.A,{className:"w-6 h-6"})})]}),e&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:()=>s(!1)}),(0,a.jsxs)("div",{className:"relative flex flex-col w-full max-w-xs ml-auto h-full bg-white shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Navigation"}),(0,a.jsx)("button",{onClick:()=>s(!1),className:"p-2 rounded-md text-gray-600 hover:text-gray-900",children:(0,a.jsx)(j.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:l.map(e=>{let t=e.icon;return(0,a.jsxs)(i(),{href:e.href,onClick:()=>s(!1),className:"\n                        flex items-start p-3 text-sm font-medium rounded-lg transition-colors\n                        ".concat(e.active?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","\n                      "),children:[(0,a.jsx)(t,{className:"flex-shrink-0 w-5 h-5 mr-3 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]})]},e.name)})}),(0,a.jsxs)("div",{className:"px-4 py-4 border-t border-gray-200 space-y-2",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Ask Suqi"]}),(0,a.jsxs)("button",{className:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})]})]})]})};var b=t(2108),f=t(4033),N=t(8071),y=t(7828);let w=()=>{let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)(null),[i,n]=(0,r.useState)(!0),[o,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{n(!0);let[e,t]=await Promise.all([fetch("/api/scout/behavior"),fetch("/api/scout/kpis")]);if(!e.ok||!t.ok)throw Error("Failed to fetch data");let a=await e.json(),r=await t.json();a.success&&s(a.data),r.success&&l(r.data.kpis)}catch(e){x(e instanceof Error?e.message:"Unknown error"),console.error("Error fetching consumer behavior data:",e)}finally{n(!1)}})()},[]);let m=e=>{let{title:s,data:t,icon:r,format:l="percentage"}=e;return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200 hover:shadow-xl transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:r}),(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:s})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm ".concat("up"===t.trend?"text-green-600":"down"===t.trend?"text-red-600":"text-gray-600"),children:["up"===t.trend?(0,a.jsx)(b.A,{className:"w-4 h-4"}):"down"===t.trend?(0,a.jsx)(f.A,{className:"w-4 h-4"}):null,(0,a.jsxs)("span",{children:[Math.abs(t.change),"%"]})]})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:"percentage"===l?"".concat(t.value.toFixed(1),"%"):t.value.toLocaleString()})]})};return i?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-red-800 font-semibold",children:"Error Loading Data"}),(0,a.jsx)("p",{className:"text-red-600 mt-2",children:o})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Consumer Behavior Analytics"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Purchase decisions, patterns & customer journey analysis"})]}),t&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(m,{title:"Conversion Rate",data:t.conversion_rate,icon:(0,a.jsx)(d.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsx)(m,{title:"Suggestion Accept",data:t.suggestion_accept_rate,icon:(0,a.jsx)(N.A,{className:"w-5 h-5 text-green-600"})}),(0,a.jsx)(m,{title:"Brand Loyalty",data:t.brand_loyalty_rate,icon:(0,a.jsx)(c.A,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsx)(m,{title:"Discovery Rate",data:t.discovery_rate,icon:(0,a.jsx)(y.A,{className:"w-5 h-5 text-orange-600"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(null==e?void 0:e.purchase_funnel)&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Customer Purchase Journey"}),(0,a.jsx)("div",{className:"space-y-4",children:e.purchase_funnel.stages.map((s,t)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:s.name}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:s.count.toLocaleString()})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-8",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-8 rounded-full flex items-center justify-end pr-4",style:{width:"".concat(s.percentage,"%")},children:(0,a.jsxs)("span",{className:"text-white text-sm font-medium",children:[s.percentage,"%"]})})}),t<e.purchase_funnel.stages.length-1&&(0,a.jsxs)("div",{className:"absolute -bottom-3 left-0 text-xs text-red-500",children:[s.drop_rate,"% drop"]})]})]},s.name))}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-3",children:"Key Conversion Points"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Browse → Request:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium",children:[e.purchase_funnel.conversion_points.browse_to_request,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Request → Suggestion:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium",children:[e.purchase_funnel.conversion_points.request_to_suggestion,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Suggestion → Purchase:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium",children:[e.purchase_funnel.conversion_points.suggestion_to_purchase,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Overall Conversion:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium text-blue-600",children:[e.purchase_funnel.conversion_points.overall_conversion,"%"]})]})]})]})]}),(null==e?void 0:e.request_methods)&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Request Methods"}),(0,a.jsx)("div",{className:"h-64 flex items-end space-x-4 p-4 bg-gray-50 rounded-lg",children:e.request_methods.map((e,s)=>{var t,r;return(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:(null==(t=e.count)?void 0:t.toLocaleString())||0}),(0,a.jsx)("div",{className:"bg-blue-500 w-full rounded-t",style:{height:"".concat(Math.max(2*(e.percentage||0),20),"px"),minHeight:"20px"}}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 mt-2 text-center",children:[(0,a.jsx)("div",{className:"font-medium",children:e.method}),(0,a.jsxs)("div",{children:[(null==(r=e.percentage)?void 0:r.toFixed(1))||0,"%"]})]})]},e.method)})}),(0,a.jsx)("div",{className:"mt-4 space-y-2",children:e.request_methods.map((e,s)=>{var t,r;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,a.jsx)("span",{className:"font-medium",children:e.method})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold",children:(null==(t=e.count)?void 0:t.toLocaleString())||0}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(null==(r=e.percentage)?void 0:r.toFixed(1))||0,"%"]})]})]},e.method)})})]})]}),(null==e?void 0:e.insights)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Key Insights"}),(0,a.jsx)("div",{className:"space-y-3",children:e.insights.key_insights.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-blue-600 text-lg",children:e.charAt(0)}),(0,a.jsx)("p",{className:"text-gray-700 flex-1",children:e.slice(2)})]},s))})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"AI Recommendations"}),(0,a.jsx)("div",{className:"space-y-3",children:e.insights.ai_recommendations.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-green-600 font-bold",children:"→"}),(0,a.jsx)("p",{className:"text-gray-700 flex-1",children:e})]},s))})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-6 rounded-lg text-white",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(g.A,{className:"w-6 h-6"}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Ask Suqi about this data..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)("button",{className:"bg-white/20 hover:bg-white/30 p-3 rounded-lg text-left transition-colors",children:(0,a.jsx)("div",{className:"font-medium",children:"What are the peak hours?"})}),(0,a.jsx)("button",{className:"bg-white/20 hover:bg-white/30 p-3 rounded-lg text-left transition-colors",children:(0,a.jsx)("div",{className:"font-medium",children:"Which products sell best?"})}),(0,a.jsx)("button",{className:"bg-white/20 hover:bg-white/30 p-3 rounded-lg text-left transition-colors",children:(0,a.jsx)("div",{className:"font-medium",children:"Customer behavior insights"})}),(0,a.jsx)("button",{className:"bg-white/20 hover:bg-white/30 p-3 rounded-lg text-left transition-colors",children:(0,a.jsx)("div",{className:"font-medium",children:"Revenue optimization tips"})})]})]})]})};function _(){return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(v,{}),(0,a.jsx)("div",{className:"lg:pl-64",children:(0,a.jsx)("main",{className:"p-6",children:(0,a.jsx)(w,{})})})]})}},6865:(e,s,t)=>{Promise.resolve().then(t.bind(t,170))}},e=>{e.O(0,[948,441,255,358],()=>e(e.s=6865)),_N_E=e.O()}]);