{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n  const { pathname, searchParams } = request.nextUrl\n  const isAgentCall = pathname.startsWith('/api/agent')\n  const isHealthCheck = pathname === '/api/health' || pathname === '/api/ping'\n\n  // Log all Pulser-related API calls\n  if (isAgentCall || isHealthCheck) {\n    const timestamp = new Date().toISOString()\n    const userAgent = request.headers.get('user-agent') || 'unknown'\n    const ip = request.ip || request.headers.get('x-forwarded-for') || 'unknown'\n    \n    console.log(`[Pulser Middleware] ${request.method} ${pathname}`, {\n      timestamp,\n      ip,\n      userAgent: userAgent.substring(0, 100), // Truncate for security\n      hasAuth: !!request.headers.get('authorization'),\n      queryParams: Object.fromEntries(searchParams.entries())\n    })\n\n    // Add request ID for tracing\n    const requestId = `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n    const response = NextResponse.next()\n    response.headers.set('x-pulser-request-id', requestId)\n    \n    return response\n  }\n\n  // Security headers for all requests\n  const response = NextResponse.next()\n  \n  // Add security headers in production\n  if (process.env.NODE_ENV === 'production') {\n    response.headers.set('X-Frame-Options', 'DENY')\n    response.headers.set('X-Content-Type-Options', 'nosniff')\n    response.headers.set('Referrer-Policy', 'strict-origin-when-cross-origin')\n  }\n\n  return response\n}\n\nexport const config = {\n  matcher: [\n    '/api/agent/:path*',\n    '/api/health',\n    '/api/ping',\n    '/((?!_next/static|_next/image|favicon.ico).*)',\n  ],\n}"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGO,SAAS,WAAW,OAAoB;IAC7C,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,QAAQ,OAAO;IAClD,MAAM,cAAc,SAAS,UAAU,CAAC;IACxC,MAAM,gBAAgB,aAAa,iBAAiB,aAAa;IAEjE,mCAAmC;IACnC,IAAI,eAAe,eAAe;QAChC,MAAM,YAAY,IAAI,OAAO,WAAW;QACxC,MAAM,YAAY,QAAQ,OAAO,CAAC,GAAG,CAAC,iBAAiB;QACvD,MAAM,KAAK,QAAQ,EAAE,IAAI,QAAQ,OAAO,CAAC,GAAG,CAAC,sBAAsB;QAEnE,QAAQ,GAAG,CAAC,CAAC,oBAAoB,EAAE,QAAQ,MAAM,CAAC,CAAC,EAAE,UAAU,EAAE;YAC/D;YACA;YACA,WAAW,UAAU,SAAS,CAAC,GAAG;YAClC,SAAS,CAAC,CAAC,QAAQ,OAAO,CAAC,GAAG,CAAC;YAC/B,aAAa,OAAO,WAAW,CAAC,aAAa,OAAO;QACtD;QAEA,6BAA6B;QAC7B,MAAM,YAAY,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;QAChF,MAAM,WAAW,4PAAY,CAAC,IAAI;QAClC,SAAS,OAAO,CAAC,GAAG,CAAC,uBAAuB;QAE5C,OAAO;IACT;IAEA,oCAAoC;IACpC,MAAM,WAAW,4PAAY,CAAC,IAAI;IAElC,qCAAqC;IACrC;;IAMA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;QACA;QACA;QACA;KACD;AACH"}}]
}